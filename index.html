<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>TNC English - H·ªçc t·ª´ v·ª±ng ti·∫øng Anh qua Flashcard & AI</title>
    
    <meta name="description" content="·ª®ng d·ª•ng h·ªçc t·ª´ v·ª±ng ti·∫øng Anh mi·ªÖn ph√≠ v·ªõi ph∆∞∆°ng ph√°p L·∫∑p l·∫°i ng·∫Øt qu√£ng (Spaced Repetition). H·ªó tr·ª£ tra t·ª´ ƒëi·ªÉn, Flashcard, AI g·ª£i √Ω v√† √¥n t·∫≠p hi·ªáu qu·∫£." />
    <meta name="keywords" content="h·ªçc ti·∫øng anh,tncenglish, t·ª´ v·ª±ng ti·∫øng anh, flashcard, spaced repetition, √¥n thi toeic, ielts, tnc english, vocab master" />
    <meta name="author" content="TNC English" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta property="og:title" content="TNC English - S·ªï tay t·ª´ v·ª±ng th√¥ng minh" />
    <meta property="og:description" content="H·ªçc t·ª´ v·ª±ng si√™u t·ªëc v·ªõi AI v√† ph∆∞∆°ng ph√°p l·∫∑p l·∫°i ng·∫Øt qu√£ng. ƒêƒÉng k√Ω ngay!" />
    <meta property="og:image" content="https://tncenglish.io.vn/thumbnail.png" /> <meta property="og:url" content="https://tncenglish.io.vn" />
    <meta property="og:type" content="website" />

    <link rel="icon" href="https://tncenglish.io.vn/logo.png" /> 
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <link rel="stylesheet" href="style.css?v=1.2.3" />
</head>
<body>
<div id="trial-timer-badge" class="floating-timer-badge" style="display:none;">
        <div class="timer-label">‚ö° D√ôNG TH·ª¨ MI·ªÑN PH√ç</div>
        <div class="timer-value" id="trial-countdown">--:--:--</div>
        <div class="timer-sub">Gia h·∫°n ƒë·ªÉ d√πng vƒ©nh vi·ªÖn</div>
</div>
<div class="app-shell">
    <div class="app">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-box">
                    <img src="assets/logo.png" alt="Logo" class="logo-img">
                        
                    <div class="logo-info">
                        <span class="logo-title">TNC English</span>
                        <span class="logo-tag">Vocab Master</span>
                    </div>
                </div>
            </div>
            <nav class="nav">
                <button class="nav-item active" onclick="showSection('vocab')">
                    <span class="nav-icon">
                        <svg class="nav-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                        </svg>
                    </span>
                    <span class="nav-text">T·ª´ v·ª±ng</span>
                </button>

                <button class="nav-item" onclick="showSection('review')">
                    <span class="nav-icon">
                        <svg class="nav-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                        </svg>
                    </span>
                    <span class="nav-text">√în t·∫≠p</span>
                </button>

                <button class="nav-item" onclick="showSection('ranking')">
                    <span class="nav-icon">
                        <svg class="nav-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 01-.982-3.172V9.412m0 9.172h-5.007m-5.007 0h5.007M4.5 9.75v-.75c0-1.242.99-2.25 2.25-2.25H9.497m0 0a9.01 9.01 0 014.503-6.75 9.01 9.01 0 014.503 6.75H20.25c1.242 0 2.25 1.008 2.25 2.25v.75m-17.25 0h17.25m-17.25 0c0 2.485 2.099 4.5 4.688 4.5H9.497m8.497-4.5c0 2.485-2.099 4.5-4.688 4.5h-1.042" />
                        </svg>
                    </span>
                    <span class="nav-text">X·∫øp h·∫°ng</span>
                </button>

                <button class="nav-item" onclick="showSection('lessons')">
                    <span class="nav-icon">
                        <svg class="nav-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.26 10.147a60.436 60.436 0 00-.491 6.347A48.627 48.627 0 0112 20.904a48.627 48.627 0 018.232-4.41 60.46 60.46 0 00-.491-6.347m-15.482 0a50.57 50.57 0 00-2.658-.813A59.905 59.905 0 0112 3.493a59.902 59.902 0 0110.499 5.516 51.55 51.55 0 01-3.387 1.579m-14.881 0a50.59 50.59 0 00-5.833 3.47m14.881 0c1.033.404 2.126.837 3.264 1.258" />
                        </svg>
                    </span>
                    <span class="nav-text">B√†i h·ªçc</span>
                </button>

                <button class="nav-item" onclick="showSection('profile')">
                    <span class="nav-icon">
                        <svg class="nav-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                        </svg>
                    </span>
                    <span class="nav-text">H·ªì s∆°</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="streak-card">
                    <div class=" fire-icon" id="sidebar-fire-icon" >
                      <svg class="fire-svg" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14.5602 11.0287C14.7776 10.3762 14.7628 9.68067 14.5186 9.03752C14.4952 8.97576 14.5323 8.90743 14.595 8.89163C15.9327 8.55462 17.394 9.68536 17.7725 11.0772C18.156 12.4877 17.7126 14.0044 16.7909 15.068C16.3276 15.6027 15.759 16.0354 15.1189 16.3283C14.4788 16.6212 13.7827 16.7674 13.0792 16.7565C12.3756 16.7456 11.6816 16.5779 11.0461 16.2652C10.4106 15.9525 9.84903 15.5024 9.40101 14.9471C8.31825 13.605 8.01991 11.7828 8.60424 10.1517C8.62589 10.0913 8.56382 10.0351 8.50577 10.0617C7.26656 10.63 6.31502 11.7601 6.04657 13.1091C5.77812 14.4581 6.22019 15.8821 7.21043 16.9023C7.70817 17.4151 8.31294 17.817 8.98306 18.0805C9.65319 18.3441 10.3727 18.4629 11.0924 18.4287C11.8122 18.3945 12.5152 18.2081 13.1531 17.8823C13.791 17.5566 14.3489 17.0991 14.7884 16.5415C15.6675 15.4262 16.0594 13.9996 15.8617 12.5857C15.7629 11.8787 15.5134 11.1996 15.1326 10.5997L14.5602 11.0287Z" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C10.5 4.5 8 7 8 10C8 13.5 10.5 15 12 18C13.5 15 16 13.5 16 10C16 7 13.5 4.5 12 2ZM12 15C11.5 14 10.5 13 10.5 11C10.5 10 11 9 12 7.5C13 9 13.5 10 13.5 11C13.5 13 12.5 14 12 15Z" />
                    </svg>
                    </div>
                    <div class="streak-info">
                        <div class="streak-label">Chu·ªói ng√†y h·ªçc</div>
                        <div class="streak-number" id="sidebar-streak-val">0 ng√†y</div>
                    </div>
                </div>
                
                <div class="app-version">v1.2.2 ‚Ä¢ Made with ‚ù§Ô∏è</div>
            </div>
        </aside>

        <!-- MAIN -->
        <main class="main">
            <!-- Th√™m t·ª´ m·ªõi -->
            <section class="card">

                <div class="card-header-row">
                    <div>
                        <div class="card-title">Th√™m t·ª´ m·ªõi</div>
                        <button class="btn-bulk-ai" onclick="openBulkModal()">
                                <span class="sparkle-icon">
                                    <svg class="icon-svg-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
                                    </svg>
                                </span> Th√™m h√†ng lo·∫°t (AI)
                        </button>
                        <button class="btn-ghost" onclick="openIrregularModal()" style="border:1px solid #d1d5db; background:white;">
                                  Tra t·ª´ BQT
                        </button>
                        <p class="card-description">
                            ƒêi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin ho·∫∑c d√πng AI ƒë·ªÉ g·ª£i √Ω
                        </p>
                    </div>
                    <span class="badge">Ngu·ªìn d·ªØ li·ªáu ch√≠nh: Gemini</span>
                </div>

                <form id="word-form">
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="word">Word *</label>
                            <input id="word" type="text" placeholder="vd: apple" required />
                            <button id="ai-suggest-button" type="button" class="btn-ghost ai-btn">
                                <svg class="icon-svg-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="width:14px; height:14px;">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
                                </svg>
                                 AI g·ª£i √Ω n·ªôi dung
                            </button>
                        </div>

                        <div class="form-field">
                            <label for="meaning">Meaning *</label>
                            <input id="meaning" type="text" placeholder="vd: qu·∫£ t√°o" required />
                        </div>

                        <div class="form-field">
                            <label for="folder">Folder (nh√≥m / ch·ªß ƒë·ªÅ)</label>
                            <input type="text" id="folder" placeholder="Folder..." list="folder-list" />
                            <datalist id="folder-list"></datalist>
                        </div>

                        <div class="form-field">
                            <label for="ipa">Pronunciation (IPA)</label>
                            <input id="ipa" type="text" placeholder="vd: /Àà√¶p.…ôl/" />
                        </div>

                        <div class="form-field">
                            <label for="type">Type</label>
                            <input id="type" type="text" placeholder="vd: noun, verb..." />
                        </div>

                        <div class="form-field">
                            <label for="status">Status</label>
                            <select id="status">
                                <option value="new">new</option>
                                <option value="learning">learning</option>
                                <option value="review">review</option>
                                <option value="mastered">mastered</option>
                            </select>
                        </div>

                        <div class="form-field" style="grid-column: 1 / -1;">
                            <label for="sentence">Sentence</label>
                            <textarea id="sentence" placeholder="vd: I eat an apple every morning."></textarea>
                        </div>
                    </div>

                    <button class="btn-primary" type="submit" id="word-submit-button">
                        + Th√™m v√†o Danh s√°ch
                    </button>
                    <button class="btn-ghost" type="button" id="cancel-edit-button" style="display:none;">
                        H·ªßy s·ª≠a
                    </button>
                    <span id="edit-hint" class="edit-hint" style="display:none; margin-left:6px;">
                        ƒêang s·ª≠a m·ªôt t·ª´ ƒë√£ l∆∞u...
                    </span>
                </form>
            </section>

            <!-- Danh s√°ch t·ª´ -->
            <section class="card" id="list-card-section">
                
                <div class="card-header-row">
                    <div>
                        <div class="card-title">Danh s√°ch t·ª´ v·ª±ng</div>
                    </div>
                </div>

                <div class="filter-toolbar">
                    
                    <div class="tools-left">
                        <div class="search-wrapper compact">
                            <span class="search-icon">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 21L15.0001 15M17 10C17 13.866 13.866 17 10 17C6.13401 17 3 13.866 3 10C3 6.13401 6.13401 3 10 3C13.866 3 17 6.13401 17 10Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </span>
                            <input type="text" id="search-input" placeholder="T√¨m ki·∫øm..." autocomplete="off">
                            <button id="clear-search" class="clear-icon" style="display:none;">&times;</button>
                        </div>
                        <div style="width:1px; height:24px; background:#e5e7eb; margin:0 4px;"></div>
                    </div>

                    <div id="folder-filter-row" class="folder-scroll-row">
                        </div>

                </div>
                
                <div class="word-list" id="word-list">
                    <div class="word-row word-header">
                        <div style="flex:1.5;">Word</div>
                        <div style="flex:1;">IPA</div>
                        <div style="flex:2;">Meaning</div>
                        <div style="flex:2;">Sentence</div>
                        <div style="flex:0.8;">Type</div>
                        <div style="flex:1;">Folder</div>
                        <div style="width:90px;">Actions</div>
                    </div>
                    
                    <div class="word-empty" id="word-empty">
                        Ch∆∞a c√≥ t·ª´ n√†o. H√£y b·∫•m "T·∫£i l·∫°i" ho·∫∑c th√™m t·ª´ m·ªõi.
                    </div>
                </div>

                <div class="pagination" id="pagination"></div>

            </section>
            <section id="review-section" class="card" style="display:none;">
                
                <div id="review-menu">
                    <div class="card-header-row">
                        <div class="card-title">Trung t√¢m √¥n t·∫≠p</div>
                        <p class="card-description">Ch·ªçn ph∆∞∆°ng ph√°p b·∫°n mu·ªën h·ªçc h√¥m nay</p>
                    </div>
                    
                    <div class="review-grid">
                        
                        <div class="review-option-card" onclick="startReviewSetup('flashcard')">
                            <div class="review-icon ri-purple">
                                <svg class="review-svg" viewBox="0 0 24 24" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 00-3.7-3.7 48.678 48.678 0 00-7.324 0 4.006 4.006 0 00-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3l-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 003.7 3.7 48.656 48.656 0 007.324 0 4.006 4.006 0 003.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3l-3 3" />
                                </svg>
                            </div>
                            <div class="review-info">
                                <h3>Flashcards</h3>
                                <p>L·∫≠t th·∫ª ki·ªÉm tra tr√≠ nh·ªõ.</p>
                            </div>
                        </div>

                        <div class="review-option-card" onclick="startReviewSetup('fill')">
                            <div class="review-icon ri-blue">
                                <svg class="review-svg" viewBox="0 0 24 24" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10" />
                                </svg>
                            </div>
                            <div class="review-info">
                                <h3>ƒêi·ªÅn t·ª´</h3>
                                <p>Nh√¨n nghƒ©a, g√µ t·ª´ ti·∫øng Anh.</p>
                            </div>
                        </div>

                        <div class="review-option-card" onclick="startReviewSetup('scramble')">
                            <div class="review-icon ri-orange">
                                <svg class="review-svg" viewBox="0 0 24 24" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M14.25 6.087c0-.355.186-.676.401-.959.221-.29.349-.634.349-1.003 0-1.036-1.007-1.875-2.25-1.875s-2.25.84-2.25 1.875c0 .369.128.713.349 1.003.215.283.401.604.401.959v0a.64.64 0 01-.657.643 48.39 48.39 0 01-4.163-.3c.186 1.613.293 3.25.315 4.907a.656.656 0 01-.658.663v0c-.355 0-.676-.186-.959-.401a1.647 1.647 0 00-1.003-.349c-1.036 0-1.875 1.007-1.875 2.25s.84 2.25 1.875 2.25c.369 0 .713-.128 1.003-.349.283-.215.604-.401.959-.401v0c.31 0 .555.26.532.57a48.039 48.039 0 01-.642 5.056c1.518.19 3.058.309 4.616.354a.64.64 0 00.657-.643v0c0-.355-.186-.676-.401-.959a1.647 1.647 0 01-.349-1.003c0-1.035 1.008-1.875 2.25-1.875 1.243 0 2.25.84 2.25 1.875 0 .369-.128.713-.349 1.003-.215.283-.4.604-.4.959v0c0 .333.277.599.61.58a48.1 48.1 0 005.427-.63 48.05 48.05 0 00.582-4.717.532.532 0 00-.533-.57v0c-.355 0-.676.186-.959.401-.29.221-.634.349-1.003.349-1.035 0-1.875-1.007-1.875-2.25s.84-2.25 1.875-2.25c.37 0 .713.128 1.003.349.283.215.604.401.959.401v0a.656.656 0 00.658-.663 48.422 48.422 0 00-.37-5.36c-1.886.342-3.81.574-5.766.689a.578.578 0 01-.61-.58v0z" />
                                </svg>
                            </div>
                            <div class="review-info">
                                <h3>S·∫Øp x·∫øp ch·ªØ</h3>
                                <p>Gh√©p c√°c k√Ω t·ª± l·ªôn x·ªôn.</p>
                            </div>
                        </div>

                    </div>
                </div>
                <div id="mode-scramble" style="display:none;padding-top: 20px;">
                    <button class="btn-ghost" onclick="backToReviewFolder()">‚Üê Ch·ªçn l·∫°i ch·ªß ƒë·ªÅ</button>
                    <div class="scramble-game-container">
                            
                            <div style="margin-bottom: 20px;">
                                <div style="font-size:11px; font-weight:700; color:#94a3b8; text-transform:uppercase;">G·ª£i √Ω nghƒ©a</div>
                                <div id="scramble-mean" style="font-size:20px; font-weight:600; color:#1e293b; margin-top:4px;">...</div>
                            </div>

                            <div id="scramble-slots-area" class="scramble-slots">
                                </div>

                            <div style="height: 20px; margin-bottom: 10px;">
                                <span id="scramble-feedback" style="font-size:13px; font-weight:500;"></span>
                            </div>

                            <div id="scramble-pool-area" class="scramble-pool">
                                </div>

                            <button onclick="nextScrambleWord()" class="btn-ghost" style="margin-top:30px; font-size:13px; color:#64748b;">
                                B·ªè qua t·ª´ n√†y
                            </button>

                    </div>
                </div>

                <div id="review-folder-selection" style="display:none; text-align:center; padding: 20px 0;">
                    <div class="card-title" style="margin-bottom:12px;">B·∫°n mu·ªën √¥n ch·ªß ƒë·ªÅ n√†o?</div>
                    
                    <div style="max-width: 300px; margin: 0 auto 20px;">
                        <label style="display:block; text-align:left; font-size:12px; margin-bottom:4px; color:#6b7280;">Ch·ªçn Folder:</label>
                        <select id="review-folder-select" style="width:100%; padding:10px; border-radius:12px; border:1px solid #d1d5db; outline:none;">
                            </select>
                    </div>

                    <div class="review-actions" style="justify-content:center; gap:10px; display:flex;">
                        <button class="btn-ghost" onclick="backToReviewMenu()">Quay l·∫°i</button>
                        <button class="btn-primary" onclick="confirmStartGame()">üöÄ B·∫Øt ƒë·∫ßu ngay</button>
                    </div>
                </div>

                <div id="mode-flashcard" style="display:none;">
                    <button class="btn-ghost" onclick="backToReviewFolder()">‚Üê Ch·ªçn l·∫°i ch·ªß ƒë·ªÅ</button>
                    <div class="flashcard-container">
                        <div class="flashcard-scene">
                            <div class="flashcard" id="flashcard-el" onclick="flipCard()">
                                <div class="flashcard-face flashcard-front">
                                    <h2 id="fc-word">Word</h2>
                                    <p id="fc-ipa" style="color:#6b7280;">/ipa/</p>
                                    <div class="tap-hint">Ch·∫°m ƒë·ªÉ l·∫≠t</div>
                                </div>
                                <div class="flashcard-face flashcard-back">
                                    <div id="fc-meaning" style="font-weight:600; font-size:18px;">Nghƒ©a</div>
                                    <p id="fc-sentence" style="margin-top:8px; font-style:italic; color:#4b5563;">Sentence</p>
                                </div>
                            </div>
                        </div>
                        <div class="review-controls">
                            <button id="btn-review-jumping" class="btn-ghost" onclick="toggleReviewJumpingMode()" style="border: 1px solid #d946ef; color: #a21caf; background: #fdf4ff; font-weight: 600;">
                                ‚ö° Hack n√£o t·ª´ n√†y
                            </button>
                            <button class="btn-ghost" onclick="prevFlashcard()">Tr∆∞·ªõc</button>
                            <span id="fc-progress">0/0</span>
                            <button class="btn-primary" onclick="nextFlashcard()">Ti·∫øp theo ‚Üí</button>
                        </div>
                    </div>
                </div>

                <div id="mode-fill" style="display:none;">
                    <button class="btn-ghost" onclick="backToReviewFolder()">‚Üê Ch·ªçn l·∫°i ch·ªß ƒë·ªÅ</button>
                    <div class="fill-game-container">
                            
                            <div class="fill-hint-box">
                                <div style="font-size:11px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:#94a3b8; margin-bottom:8px;">G·ª£i √Ω nghƒ©a</div>
                                <div id="fill-mean" class="fill-hint-text" style="font-size:20px; color:#1e293b; font-weight:600; line-height:1.4;">ƒêang t·∫£i...</div>
                                <div id="fill-ipa" class="fill-ipa" style="margin-top:5px; font-family:monospace; color:#64748b;">/ipa/</div>
                            </div>

                            <div class="fill-input-wrapper">
                                <input type="text" id="fill-input" class="fill-input" placeholder="G√µ t·ª´ ti·∫øng Anh..." autocomplete="off">
                                <span id="fill-status-icon" style="position:absolute; right:15px; top:50%; transform:translateY(-50%); font-size:20px; display:none;"></span>
                            </div>

                            <button onclick="checkFillAnswer()" class="btn-check-fill">Ki·ªÉm tra ‚Üµ</button>
                            
                            <button onclick="nextFillWord()" class="btn-ghost" style="margin-top:15px; font-size:13px; color:#64748b;">B·ªè qua t·ª´ n√†y</button>

                    </div>
                </div>

            </section>
            <section id="ranking-section" class="card" style="display:none; background: transparent; border: none; box-shadow: none; padding: 0; height: 100%;">
                
                <div class="ranking-layout">
                    <div class="leaderboard-panel">
                        <div class="lb-header">
                            <div class="lb-col-rank">H·∫†NG</div>
                            <div class="lb-col-user">NG∆Ø·ªúI D√ôNG</div>
                            <div class="lb-col-score">STREAK</div>
                        </div>
                        
                        <div id="leaderboard-list" class="lb-list-scroll">
                        </div>
                        
                    <div class="lb-my-rank" id="my-rank-footer">
                        
                        <div class="my-rank-badge" id="my-rank-num">--</div>
                        
                        <div class="my-rank-info">
                            <div class="my-name-display" id="my-rank-name">B·∫°n</div>
                            <div class="my-rank-status" id="my-rank-desc">B·∫°n l√† nh·∫•t! C·ªë gƒÉng nh√©...</div>
                        </div>
                        
                        <div class="my-score-display">
                            <span id="my-rank-streak">0</span> <span class="fire-icon">
                                <svg class="fire-svg" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M14.5602 11.0287C14.7776 10.3762 14.7628 9.68067 14.5186 9.03752C14.4952 8.97576 14.5323 8.90743 14.595 8.89163C15.9327 8.55462 17.394 9.68536 17.7725 11.0772C18.156 12.4877 17.7126 14.0044 16.7909 15.068C16.3276 15.6027 15.759 16.0354 15.1189 16.3283C14.4788 16.6212 13.7827 16.7674 13.0792 16.7565C12.3756 16.7456 11.6816 16.5779 11.0461 16.2652C10.4106 15.9525 9.84903 15.5024 9.40101 14.9471C8.31825 13.605 8.01991 11.7828 8.60424 10.1517C8.62589 10.0913 8.56382 10.0351 8.50577 10.0617C7.26656 10.63 6.31502 11.7601 6.04657 13.1091C5.77812 14.4581 6.22019 15.8821 7.21043 16.9023C7.70817 17.4151 8.31294 17.817 8.98306 18.0805C9.65319 18.3441 10.3727 18.4629 11.0924 18.4287C11.8122 18.3945 12.5152 18.2081 13.1531 17.8823C13.791 17.5566 14.3489 17.0991 14.7884 16.5415C15.6675 15.4262 16.0594 13.9996 15.8617 12.5857C15.7629 11.8787 15.5134 11.1996 15.1326 10.5997L14.5602 11.0287Z" />
                                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C10.5 4.5 8 7 8 10C8 13.5 10.5 15 12 18C13.5 15 16 13.5 16 10C16 7 13.5 4.5 12 2ZM12 15C11.5 14 10.5 13 10.5 11C10.5 10 11 9 12 7.5C13 9 13.5 10 13.5 11C13.5 13 12.5 14 12 15Z" />
                                </svg>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="ranking-sidebar">
                    
                    <div class="widget-card heatmap-card">
                    <div class="widget-header">
                        <div style="display:flex; align-items:center;">
                            <svg class="icon-svg-sm" style="width:20px; height:20px; color:#ea580c; margin-right:8px;" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M15.362 5.214A8.252 8.252 0 0112 21 8.25 8.25 0 016.038 7.048 8.287 8.287 0 009 9.6a8.983 8.983 0 013.361-6.867 8.21 8.21 0 003 2.48z" />
                                <path stroke-linecap="round" stroke-linejoin="round" d="M12 18a3.75 3.75 0 00.495-7.467 5.99 5.99 0 00-1.925 3.546 5.974 5.974 0 01-2.133-1A3.75 3.75 0 0012 18z" />
                            </svg>
                            <span>Ho·∫°t ƒë·ªông</span>
                        </div>
                    </div>
                    
                    <div class="heatmap-wrapper">
                        <div class="heatmap-months" id="heatmap-months">
                            </div>

                        <div class="heatmap-body">
                            <div class="heatmap-days">
                                <span></span>   <span>T2</span> <span></span>   <span>T4</span> <span></span>   <span>T6</span> <span></span>   </div>
                            
                            <div class="heatmap-grid" id="heatmap-grid"></div>
                        </div>
                    </div>

                    <div class="heatmap-legend">
                        <span>√çt</span>
                        <div class="sq hm-l0"></div>
                        <div class="sq hm-l1"></div>
                        <div class="sq hm-l2"></div>
                        <div class="sq hm-l3"></div>
                        <div class="sq hm-l4"></div>
                        <span>Nhi·ªÅu</span>
                    </div>
                </div>

                <div class="widget-card chat-widget">
                    <div class="widget-header">
                        <div style="display:flex; align-items:center;">
                            <svg class="icon-svg-sm" style="width:20px; height:20px; color:#4f46e5; margin-right:8px;" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.186.078-2.1 1.051-2.1 2.238v4.692c0 1.187.914 2.16 2.1 2.238 1.302.086 2.633.15 3.98.192M15 8.35v-1.95a2.25 2.25 0 00-2.25-2.25h-9A2.25 2.25 0 001.5 6.4v4.94c0 1.255.69 2.373 1.71 2.977M6 15.114v2.793l3-3" />
                            </svg>
                            <span>Tr√≤ chuy·ªán c·ªông ƒë·ªìng</span>
                        </div>

                        <div class="refresh-btn-wrapper" onclick="loadChatMessages()" title="T·∫£i l·∫°i tin nh·∫Øn">
                            <svg class="refresh-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
                            </svg>
                        </div>
                    </div>
                    
                    <div class="chat-content" id="chat-content">
                        <div style="text-align:center; padding:30px; color:#94a3b8; font-size:12px;">
                            <div class="mini-spinner" style="margin:0 auto 5px; width:16px; height:16px; border-width:2px;"></div>
                            ƒêang t·∫£i h·ªôi tho·∫°i...
                        </div>
                    </div>

                    <div class="chat-input-area">
                        <input type="text" id="chat-input-field" placeholder="Nh·∫≠p tin nh·∫Øn..." class="chat-input" 
                            autocomplete="off"
                            onkeypress="if(event.key === 'Enter') sendChatMessage()">
                        
                        <button class="chat-send-btn" onclick="sendChatMessage()">‚û§</button>
                    </div>

                    <div style="text-align:center; margin-top:8px; font-size:10px; color:#9ca3af; cursor:pointer;" 
                        onclick="window.open('https://zalo.me/g/vggdoi022', '_blank')">
                        H·ªó tr·ª£ / B√°o c√°o vi ph·∫°m
                    </div>
                </div>
            </section>

        <section id="profile-section" class="card" style="display:none; border:none; background:transparent; padding:0; box-shadow:none;">
            
            <div class="profile-header-card">
                <div class="profile-avatar">
                    <svg class="pro-svg avatar-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                    </svg>
                </div>
                <div class="profile-info">
                    <div class="profile-name" id="user-display">ƒêang t·∫£i...</div>
                    <div class="profile-email" id="user-email-sub">...</div>
                    <div id="account-status-badge" style="margin-top:6px;"></div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-icon fire-icon" id="profile-fire-icon" >
                        <svg class="fire-svg" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                            <path d="M14.5602 11.0287C14.7776 10.3762 14.7628 9.68067 14.5186 9.03752C14.4952 8.97576 14.5323 8.90743 14.595 8.89163C15.9327 8.55462 17.394 9.68536 17.7725 11.0772C18.156 12.4877 17.7126 14.0044 16.7909 15.068C16.3276 15.6027 15.759 16.0354 15.1189 16.3283C14.4788 16.6212 13.7827 16.7674 13.0792 16.7565C12.3756 16.7456 11.6816 16.5779 11.0461 16.2652C10.4106 15.9525 9.84903 15.5024 9.40101 14.9471C8.31825 13.605 8.01991 11.7828 8.60424 10.1517C8.62589 10.0913 8.56382 10.0351 8.50577 10.0617C7.26656 10.63 6.31502 11.7601 6.04657 13.1091C5.77812 14.4581 6.22019 15.8821 7.21043 16.9023C7.70817 17.4151 8.31294 17.817 8.98306 18.0805C9.65319 18.3441 10.3727 18.4629 11.0924 18.4287C11.8122 18.3945 12.5152 18.2081 13.1531 17.8823C13.791 17.5566 14.3489 17.0991 14.7884 16.5415C15.6675 15.4262 16.0594 13.9996 15.8617 12.5857C15.7629 11.8787 15.5134 11.1996 15.1326 10.5997L14.5602 11.0287Z" />
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M12 2C10.5 4.5 8 7 8 10C8 13.5 10.5 15 12 18C13.5 15 16 13.5 16 10C16 7 13.5 4.5 12 2ZM12 15C11.5 14 10.5 13 10.5 11C10.5 10 11 9 12 7.5C13 9 13.5 10 13.5 11C13.5 13 12.5 14 12 15Z" />
                        </svg></div>
                    <div class="stat-val" id="streak-count-val">0</div>
                    <div class="stat-label">Chu·ªói ng√†y (Streak)</div>
                </div>
                <div class="stat-box">
                    <div class="stat-icon">
                        <svg class="pro-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                        </svg>
                    </div>
                    <div class="stat-val" id="total-words-val">0</div>
                    <div class="stat-label">T·ªïng t·ª´ v·ª±ng</div>
                </div>
            </div>

            
                <h3 style="font-size:16px; font-weight:700; color:#1e293b; display:flex; align-items:center; gap:8px;">
                    <span class="setting-icon" style="background:#eef2ff; color:#4f46e5;">
                <svg class="pro-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z" />
                </svg>
            </span>C·∫•u h√¨nh gi·ªçng ƒë·ªçc
                </h3>

                <div class="voice-config-card">
                    <div class="voice-row">
                        <label class="voice-label">Gi·ªçng ƒë·ªçc h·ªá th·ªëng:</label>
                        <div style="display: flex; gap: 10px;">
                            <div class="custom-select-wrapper" style="flex:1;">
                                <select id="voice-select" class="modern-select">
                                    <option>ƒêang t·∫£i danh s√°ch...</option>
                                </select>
                                <span class="select-arrow">‚ñº</span>
                            </div>
                            <button class="btn-test-voice" onclick="testCurrentVoice()">
                                <span><svg class="audio-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
        </svg></span> Th·ª≠
                            </button>
                        </div>
                    </div>

                    <div class="voice-row">
                        <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                            <label class="voice-label" style="margin:0;">T·ªëc ƒë·ªô ƒë·ªçc</label>
                            <span id="speed-val" style="font-size:13px; font-weight:700; color:#6366f1;">0.95x</span>
                        </div>
                        
                        <input type="range" id="voice-speed" class="modern-range" 
                            min="0.5" max="1.5" step="0.05" value="0.95"
                            oninput="document.getElementById('speed-val').innerText = this.value + 'x'">
                            
                        <div style="display:flex; justify-content:space-between; font-size:10px; color:#94a3b8; margin-top:6px;">
                            <span>Ch·∫≠m</span>
                            <span>B√¨nh th∆∞·ªùng</span>
                            <span>Nhanh</span>
                        </div>
                    </div>
                </div>
           

            <div class="settings-list">
                <div class="setting-item" onclick="showApiKeyModal()">
                    <div class="setting-left">
                        <span class="setting-icon" style="background:#eef2ff; color:#4f46e5;">
                            <svg class="pro-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25z" />
                            </svg>
                        </span>
                        <div>
                            <div class="setting-title">C·∫•u h√¨nh Gemini AI</div>
                            <div class="setting-sub">Nh·∫≠p API Key ƒë·ªÉ d√πng t√≠nh nƒÉng g·ª£i √Ω</div>
                        </div>
                    </div>
                    <div style="font-size:12px; color:#6b7280;">·ê≥</div>
                </div>

                <div class="setting-item" onclick="openChangePwModal()">
                    <div class="setting-left">
                        <span class="setting-icon" style="background:#fff7ed; color:#ea580c;">
                            <svg class="pro-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z" />
                            </svg>
                        </span>
                        <div>
                            <div class="setting-title">ƒê·ªïi m·∫≠t kh·∫©u</div>
                            <div class="setting-sub">C·∫≠p nh·∫≠t m·∫≠t kh·∫©u b·∫£o v·ªá t√†i kho·∫£n</div>
                        </div>
                    </div>
                    <div style="font-size:12px; color:#6b7280;">·ê≥</div>
                </div>
                
                <div class="setting-item" onclick="window.location.href='https://zalo.me/g/vggdoi022'">
                    <div class="setting-left">
                        <span class="setting-icon" style="background:#f0fdf4; color:#16a34a;">
                            <svg class="pro-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z" />
                            </svg>
                        </span>
                        <div>
                            <div class="setting-title">H·ªó tr·ª£ / Li√™n h·ªá Admin</div>
                            <div class="setting-sub">Gia h·∫°n, b√°o l·ªói, g√≥p √Ω t√≠nh nƒÉng</div>
                        </div>
                    </div>
                    <div style="font-size:12px; color:#6b7280;">‚Üó</div>
                </div>
            </div>

            <button id="logout-button" class="btn-logout-big">
                <svg class="pro-svg logout-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
                </svg> ƒêƒÉng xu·∫•t t√†i kho·∫£n
            </button>
            
            <div style="text-align:center; margin-top:20px; font-size:11px; color:#9ca3af;">
                Phi√™n b·∫£n 1.2.2 ‚Ä¢ TNC English
            </div>
        </section>

        <section id="lessons-section" class="card" style="display:none; background: transparent; border: none; box-shadow: none; padding: 0;">
            
            <div id="course-list-view">
                <div style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 24px; color: #4f46e5;"><svg class="nav-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25" />
                        </svg></span>
                    <h2 class="card-title" style="margin:0; font-size: 22px;">T·∫•t c·∫£ kh√≥a h·ªçc</h2>
                </div>
                <div id="course-list-container" class="lesson-grid">
                    </div>
            </div>

            <div id="topic-list-view" style="display: none;">
                <div class="topic-view-header">
                    <div class="header-top-row" onclick="backToCourses()">
                        <span style="font-size: 18px; color: #3b82f6;">‚ùÆ</span> 
                        <h3 id="current-course-title" style="margin:0; font-size: 16px; color: #1f2937;">T√™n kh√≥a h·ªçc</h3>
                    </div>
                    
                    <div class="header-progress-row">
                        <div class="progress-track" style="height: 6px;">
                            <div id="course-total-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <span id="course-progress-text" style="font-size: 11px; color: #6b7280; min-width: 40px; text-align: right;">0 / 0</span>
                        <span style="font-size: 16px; color: #3b82f6; margin-left: 8px;">üìñ</span>
                    </div>
                </div>

                <div id="topic-list-container" class="topic-grid">
                    </div>
            </div>

        </section>
        <section id="learning-section" class="card" style="display:none; border:none; background:transparent; padding:0; box-shadow:none; height: 100%;">
            
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding: 0 10px;">
                <div style="display:flex; align-items:center; gap:10px;">
                    <button onclick="closeLearningMode()" class="btn-ghost" style="font-size:18px; padding:4px 8px;">‚úï</button>
                    <div>
                        <div style="font-size:12px; color:#6b7280; text-transform:uppercase;">ƒêang h·ªçc</div>
                        <div id="learning-topic-title" style="font-size:16px; font-weight:700; color:#1f2937;">Topic Name</div>
                    </div>
                </div>
                <div id="learning-progress-text" style="font-size:14px; font-weight:600; color:#4f46e5;">1/10</div>
            </div>

            <div id="learning-card-container" class="flashcard-container" style="margin-top:10px; height: calc(100vh - 150px); justify-content: flex-start;">
                <div class="flashcard-scene" style="width: 100%; max-width: 340px; height: 420px;">
                    <div class="flashcard" id="topic-flashcard-el" onclick="flipTopicCard()">
                        <div class="flashcard-face flashcard-front">
                            <span class="badge-new" style="position:absolute; top:20px; right:20px;">Learning</span>
                            <h2 id="learn-word" style="font-size:32px; margin-bottom:8px;">Word</h2>
                            <p id="learn-ipa" style="color:#6b7280; font-family:monospace; font-size:16px;">/ipa/</p>
                            <div class="tap-hint">Ch·∫°m ƒë·ªÉ l·∫≠t & xem nghƒ©a</div>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <div id="learn-meaning" style="font-weight:700; font-size:22px; color:#166534; margin-bottom:12px;">Nghƒ©a</div>
                            <div style="width:40px; height:2px; background:#e5e7eb; margin:0 auto 12px;"></div>
                            <p id="learn-sentence" style="font-style:italic; color:#4b5563; font-size:15px; padding:0 20px;">Sentence</p>
                            <div style="margin-top:20px;">
                                <span class="tag-level" id="learn-type">noun</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="review-controls" style="margin-top:30px; width: 100%; max-width: 340px;">
                    <button id="btn-jumping-mode" class="btn-ghost" onclick="toggleJumpingMode()" style="border: 1px solid #d946ef; color: #a21caf; background: #fdf4ff; font-weight: 600;">
                                ‚ö° Hack n√£o t·ª´ n√†y
                    </button>
                    <button class="btn-primary" onclick="nextTopicCard()" style="width:100%; padding:14px; font-size:16px; box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);">
                        ƒê√£ hi·ªÉu, ti·∫øp theo ‚ûú
                    </button>
                </div>
            </div>

            <div id="topic-summary-view" style="display: none; background: white; border-radius: 20px; padding: 20px; margin-top: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);">
                <div style="text-align:center; margin-bottom:20px;">
                    <div style="font-size:40px; margin-bottom:10px;">üéâ</div>
                    <div class="card-title" style="font-size:20px;">Ho√†n th√†nh b√†i h·ªçc!</div>
                    <p class="card-description">Ch·ªçn t·ª´ b·∫°n mu·ªën l∆∞u v√†o s·ªï tay c√° nh√¢n.</p>
                </div>

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; background:#f9fafb; padding:8px 12px; border-radius:8px;">
                    <label style="font-size:13px; font-weight:600; cursor:pointer; display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="check-all-summary" onchange="toggleCheckAllSummary()"> Ch·ªçn t·∫•t c·∫£
                    </label>
                    <span id="selected-count" style="font-size:12px; color:#6b7280;">0 ƒë√£ ch·ªçn</span>
                </div>

                <div id="summary-list-container" class="summary-list-scroll" style="max-height: 50vh;"></div>

                <div class="modal-actions" style="margin-top: 20px; justify-content: center; gap: 12px;">
                    <button class="btn-ghost" onclick="closeLearningMode()">V·ªÅ danh s√°ch</button>
                    <button class="btn-primary" onclick="saveSelectedSummaryWords()" id="btn-save-summary">üíæ L∆∞u v√†o S·ªï tay</button>
                </div>
            </div>

        </section>
        </main>
    </div>
</div>
<div id="irregular-modal" class="modal-backdrop" style="display:none; z-index:99999;">
    <div class="modal-card" style="height: 85vh; display: flex; flex-direction: column;">
        <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
            <h3 class="modal-title" style="margin:0; font-size:18px; color:#4f46e5;"> Tra c·ª©u ƒê·ªông t·ª´ BQT</h3>
            <button onclick="closeIrregularModal()" class="close-icon-btn">√ó</button>
        </div>

        <div class="search-input-wrapper" style="width:100%; margin-bottom:15px;">
            <input id="irregular-search-input" type="text" placeholder="Nh·∫≠p t·ª´ (go, went, ƒÉn...)" 
                   autocomplete="off" style="width:100%; padding:12px; border-radius:12px; border:1px solid #d1d5db; font-size:16px;">
        </div>

        <div id="irregular-result-container" style="flex:1; overflow-y:auto; padding-right:5px; padding-bottom:20px;">
            </div>

        <div id="irregular-placeholder" style="text-align:center; color:#9ca3af; margin-top:auto; margin-bottom:auto;">
            <div style="font-size:40px; margin-bottom:10px;">üìñ</div>
            <div>Nh·∫≠p t·ª´ ƒë·ªÉ tra c·ª©u 360 ƒë·ªông t·ª´</div>
        </div>
    </div>
</div>
<div id="auto-play-modal" class="modal-backdrop" style="display:none; z-index: 99999;">
    <div class="modal-card" style="width: 90%; height: 80%; max-width: 600px; padding: 0; display: flex; flex-direction: column; overflow: hidden; background: #fdf4ff;">
        
        <div style="padding: 15px 20px; background: white; border-bottom: 1px solid #f0abfc; display: flex; justify-content: space-between; align-items: center;">
            <div style="display:flex; align-items:center; gap:8px;">
                <span style="font-size:20px;">‚ö°</span>
                <span style="font-weight:800; color:#a21caf; font-size:16px;">Luy·ªán ph·∫£n x·∫°</span>
            </div>
            <button onclick="stopJumpingMode()" class="btn-ghost" style="color:#d946ef; font-weight:bold;">ƒê√ìNG ‚úï</button>
        </div>

        <div style="width: 100%; height: 6px; background: #fae8ff;">
            <div id="auto-play-progress" style="width: 100%; height: 100%; background: linear-gradient(90deg, #d946ef, #a855f7); transition: width 1s linear;"></div>
        </div>

        <div id="jumping-area" style="flex: 1; position: relative; overflow: hidden; background-image: radial-gradient(#f5d0fe 1px, transparent 1px); background-size: 20px 20px;">
            
            <div id="jumping-word-el" class="jumping-card">
                <div id="jump-word-text" class="jump-text">Ready?</div>
                <div id="jump-word-mean" class="jump-mean">Chu·∫©n b·ªã...</div>
            </div>

        </div>

        <div style="padding: 10px; text-align: center; color: #a21caf; font-size: 12px; background: white; border-top: 1px solid #f0abfc;">
            <svg class="audio-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.114 5.636a9 9 0 010 12.728M16.463 8.288a5.25 5.25 0 010 7.424M6.75 8.25l4.72-4.72a.75.75 0 011.28.53v15.88a.75.75 0 01-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.01 9.01 0 012.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75z" />
        </svg> Nghe v√† nh√¨n theo t·ª´ v·ª±ng ƒëang xu·∫•t hi·ªán
        </div>
    </div>
</div>

<!-- Modal ƒë·ªïi m·∫≠t kh·∫©u -->
<div class="modal-backdrop" id="change-password-modal" style="display:none;">
    <div class="modal-card">
        <div class="modal-title">ƒê·ªïi m·∫≠t kh·∫©u</div>
        <p class="modal-sub">M·∫≠t kh·∫©u s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t cho t√†i kho·∫£n ƒëang ƒëƒÉng nh·∫≠p.</p>

        <form id="change-password-form" class="modal-form">
            <div class="form-field">
                <label for="old-password">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                <input type="password" id="old-password" autocomplete="current-password" />
            </div>
            <div class="form-field">
                <label for="new-password">M·∫≠t kh·∫©u m·ªõi</label>
                <input type="password" id="new-password" autocomplete="new-password" />
            </div>
            <div class="form-field">
                <label for="confirm-password">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi</label>
                <input type="password" id="confirm-password" autocomplete="new-password" />
            </div>

            <div class="modal-actions">
                <button type="button" class="btn-ghost" id="cancel-change-password">H·ªßy</button>
                <button type="submit" class="btn-primary">L∆∞u m·∫≠t kh·∫©u</button>
            </div>

            <div id="change-password-message" class="modal-message"></div>
        </form>
    </div>
</div>

<!-- Popup AI spinner -->
<div class="modal-backdrop" id="ai-modal" style="display:none;">
    <div class="ai-card">
        <div class="ai-title">ü§ñ Gemini ƒëang g·ª£i √Ω...</div>
        <div class="ai-body">
            <div class="ai-spinner"></div>
            <div>
                <div id="ai-word-label" class="ai-word-label"></div>
                <div class="ai-text">
                    ƒêang t·∫°o IPA, nghƒ©a ti·∫øng Vi·ªát, c√¢u v√≠ d·ª• v√† lo·∫°i t·ª´. Th∆∞·ªùng ch·ªâ v√†i gi√¢y üí´
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Popup nh·∫≠p Gemini key -->
<div class="modal-backdrop" id="gemini-key-modal" style="display:none;">
    <div class="modal-card">
        <div class="modal-title">Thi·∫øt l·∫≠p Gemini API key</div>
        <p class="modal-sub">
            D√°n Gemini API key ƒë√£ ƒë∆∞·ª£c c·∫•p. H·ªá th·ªëng s·∫Ω ki·ªÉm tra <b>Users</b>.
        </p>

        <form id="gemini-key-form" class="modal-form">
            <div class="form-field">
                <label for="gemini-key-input">Gemini API key</label>
                <input type="text" id="gemini-key-input" autocomplete="off" />
            </div>

            <div class="modal-actions">
                <button type="button" class="btn-ghost" id="cancel-gemini-key">H·ªßy</button>
                <button type="submit" class="btn-primary">L∆∞u key</button>
            </div>

            <div id="gemini-key-message" class="modal-message"></div>
        </form>
    </div>
</div>

<div id="api-key-modal" class="modal-backdrop">
    <div class="modal-card">
        <div class="modal-title">C·∫•u h√¨nh Gemini AI</div>
        <div class="modal-sub">Nh·∫≠p API Key ƒë·ªÉ s·ª≠ d·ª•ng t√≠nh nƒÉng g·ª£i √Ω t·ª´ v·ª±ng, d·ªãch nghƒ©a t·ª± ƒë·ªông.</div>

        <div class="modal-form">
            <div class="form-field">
                <label>Gemini API Key</label>
                <div style="position:relative;">
                    <input type="password" id="input-gemini-key" placeholder="Nh·∫≠p key c·ªßa b·∫°n (b·∫Øt ƒë·∫ßu b·∫±ng AIza...)" style="padding-right: 30px;" />
                    <span onclick="toggleKeyVisibility()" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; font-size:14px;">üëÅÔ∏è</span>
                </div>
            </div>
        </div>

        <div style="margin-top:12px;">
            <div onclick="toggleApiGuide()" style="cursor:pointer; color:#4f46e5; font-size:13px; font-weight:600; display:flex; align-items:center; gap:4px;">
                <span id="guide-arrow">‚ñ∂</span> H∆∞·ªõng d·∫´n l·∫•y Key (Mi·ªÖn ph√≠)
            </div>
            
            <div id="api-guide-content" style="display:none; margin-top:8px; background:#f9fafb; padding:12px; border-radius:12px; font-size:12px; border:1px solid #e5e7eb;">
                <ol style="margin:0; padding-left:20px; color:#374151; line-height:1.6;">
                    <li>Truy c·∫≠p <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color:#4f46e5; font-weight:600;">Google AI Studio</a>.</li>
                    <li>ƒêƒÉng nh·∫≠p b·∫±ng t√†i kho·∫£n Google c·ªßa b·∫°n.</li>
                    <li>Nh·∫•n v√†o n√∫t to <b>"Create API key"</b>.</li>
                    <li>Ch·ªçn <b>"Create API key in new project"</b>.</li>
                    <li>Copy ƒëo·∫°n m√£ b·∫Øt ƒë·∫ßu b·∫±ng <code>AIza...</code> v√† d√°n v√†o √¥ b√™n tr√™n.</li>
                </ol>
                <div style="margin-top:6px; color:#059669; font-weight:500;">‚ú® Ho√†n to√†n mi·ªÖn ph√≠ cho c√° nh√¢n.</div>
            </div>
        </div>

        <div id="api-msg" class="modal-message"></div>

        <div class="modal-actions">
            <button class="btn-ghost" onclick="closeApiKeyModal()">ƒê√≥ng</button>
            <button class="btn-primary" onclick="saveApiKey()">L∆∞u c√†i ƒë·∫∑t</button>
        </div>
    </div>
</div>

<!-- Toast -->
<div id="toast"></div>
<div id="toast-loading">
    <div class="mini-spinner"></div>
    <span id="toast-loading-text">ƒêang t·∫£i d·ªØ li·ªáu...</span>
</div>

<div id="premium-modal" class="modal-backdrop" style="display:none;">
    <div class="modal-card-premium">
        <button onclick="closePremiumPopup()" class="close-btn">‚úï</button>

        <div class="premium-header">
            <span class="premium-icon">
                <svg class="premium-svg icon-expired" viewBox="0 0 24 24" stroke="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </span>
            <h3 class="premium-title">T√†i kho·∫£n h·∫øt h·∫°n</h3>
            <p class="premium-sub">H·∫°n s·ª≠ d·ª•ng: <span id="session-expired-date">...</span></p>
        </div>

        <div class="pricing-container">
            <div class="plan-box plan-month">
                <div class="plan-name">Theo th√°ng</div>
                <div class="plan-price">35.000ƒë</div>
                <div style="font-size: 11px; color: #94a3b8; margin-top: 4px;">/ 1 th√°ng</div>
            </div>

            <div class="plan-box plan-lifetime">
                <div class="badge-best">TI·∫æT KI·ªÜM NH·∫§T</div>
                <div class="plan-name">Tr·ªçn ƒë·ªùi</div>
                <div class="plan-price">150.000ƒë</div>
                <div class="plan-desc">D√πng vƒ©nh vi·ªÖn</div>
            </div>
        </div>

        <div class="payment-details">
            <div style="text-align:center; font-size:12px; color:#64748b; margin-bottom:8px;">
                Qu√©t m√£ ho·∫∑c chuy·ªÉn kho·∫£n theo th√¥ng tin:
            </div>
            
            <div class="bank-card">
                <div class="bank-row">
                    <span class="bank-label">Ng√¢n h√†ng:</span>
                    <span class="bank-val" style="color:#6366f1;">TPBank</span>
                </div>
                <div class="bank-row">
                    <span class="bank-label">Ch·ªß TK:</span>
                    <span class="bank-val">TRAN NGOC CUONG</span>
                </div>
                <div class="bank-row">
                    <span class="bank-label">S·ªë TK:</span>
                    <span class="bank-val" style="font-size: 15px; letter-spacing: 0.5px;">04312089999</span>
                </div>
                
                <div style="margin-top:12px; font-size:11px; color:#64748b; text-align: center;">N·ªôi dung chuy·ªÉn kho·∫£n (B·∫Øt bu·ªôc):</div>
                <div class="copy-syntax">VOCAB [EMAIL_CUA_BAN]</div>
            </div>
        </div>

        <div class="modal-footer">
            <div class="legal-text">
                ‚ö†Ô∏è <b>L∆∞u √Ω:</b> Kho·∫£n ph√≠ tr√™n d√πng ƒë·ªÉ duy tr√¨ m√°y ch·ªß, API AI v√† b·∫£o d∆∞·ª°ng h·ªá th·ªëng. Ch√∫ng t√¥i kh√¥ng kinh doanh v√¨ l·ª£i nhu·∫≠n v√† tu√¢n th·ªß ph√°p lu·∫≠t. Li√™n h·ªá Zalo: <b>0946415092</b> n·∫øu c·∫ßn h·ªó tr·ª£.
            </div>
            
            <button id="force-logout-btn" class="btn-logout">
                ƒêƒÉng xu·∫•t & K√≠ch ho·∫°t l·∫°i
            </button>
        </div>
    </div>
</div>
<!-- confetti-->
<canvas id="confetti-canvas" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:999999; display:none;"></canvas>

<div id="celebration-modal" class="modal-backdrop" style="display:none; z-index:99999;">
    <div class="modal-card" style="text-align:center; border-top: 5px solid #f59e0b; width: 360px;">
        <div style="font-size: 60px; margin-bottom: 10px; animation: bounce 1s infinite;">üèÜ</div>
        <div class="modal-title" style="color:#d97706; font-size:24px;">Xu·∫•t s·∫Øc!</div>
        
        <p class="modal-sub" style="font-size:15px; margin: 10px 0; color: #4b5563;">
            B·∫°n ƒë√£ √¥n t·∫≠p xong <b id="celebration-count" style="color:#d97706;">0</b> t·ª´ v·ª±ng.
        </p>
        
        <div style="background:#fffbeb; padding:12px; border-radius:12px; font-size:14px; color:#92400e; margin-bottom:20px;">
            "H·ªçc t·∫≠p l√† h·∫°t gi·ªëng c·ªßa ki·∫øn th·ª©c, ki·∫øn th·ª©c l√† h·∫°t gi·ªëng c·ªßa h·∫°nh ph√∫c." üå±
        </div>

        <button class="btn-primary" onclick="closeCelebration()" style="width:100%; background: linear-gradient(to right, #f59e0b, #d97706); border:none;">
            Tuy·ªát v·ªùi, quay l·∫°i!
        </button>
    </div>
</div>
<div id="srs-modal" class="modal-backdrop" style="display:none; z-index:99999;">
    <div class="modal-card" style="width: 400px; border-top: 5px solid #4f46e5;">
        <div style="text-align:center; margin-bottom:12px;">
            <div style="font-size: 40px;">üîî</div>
            <div class="modal-title" style="color:#4f46e5;">Nh·∫Øc nh·ªü √¥n t·∫≠p</div>
            <p class="modal-sub">
                Ph∆∞∆°ng ph√°p <b>L·∫∑p l·∫°i ng·∫Øt qu√£ng</b>: H√£y l∆∞·ªõt nhanh qua c√°c t·ª´ b·∫°n m·ªõi h·ªçc trong 3 ng√†y qua ƒë·ªÉ kh·∫Øc s√¢u tr√≠ nh·ªõ!
            </p>
        </div>

        <div id="srs-list-container" style="max-height: 250px; overflow-y: auto; background: #f9fafb; padding: 10px; border-radius: 12px; border: 1px solid #e5e7eb; margin-bottom: 16px;">
            </div>

        <div class="modal-actions" style="justify-content: center;">
            <button class="btn-primary" onclick="closeSRSModal()" style="width:100%;">ƒê√£ √¥n xong, c·∫£m ∆°n!</button>
        </div>
    </div>
</div>

<div id="global-loader">
    <div class="loader-content">
        <div class="loader-icon"><img src="assets/logo.png" alt="Logo" class="logo-img"></div>
        
        <div class="loader-title">TNC ENGLISH</div>
        
        <div class="tip-container">
            <div class="tip-label">üí° M·∫∏O GHI NH·ªö:</div>
            <div id="loader-tip-text" class="tip-text">ƒêang t·∫£i d·ªØ li·ªáu...</div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="loader-progress"></div>
        </div>
    </div>
</div>
<div id="bulk-modal" class="modal-backdrop" style="display:none;">
    <div class="modal-card" style="width: 600px; max-width:95%;">
        
        <div class="modal-header-modern">
            <h3 class="modal-title-text">‚ö° Th√™m t·ª´ nhanh (qua Gemini Gem)</h3>
            
        </div>
        
        <div class="modal-body-modern">
            
            <div class="step-box-1">
                <div class="step-label">B∆Ø·ªöC 1: L·∫•y d·ªØ li·ªáu</div>
                <p class="step-desc">
                    Click n√∫t d∆∞·ªõi ƒë·ªÉ m·ªü Gem. Nh·∫≠p danh s√°ch t·ª´ c·∫ßn h·ªçc v√†o ƒë√≥, sau ƒë√≥ <b>Copy ƒëo·∫°n m√£ JSON</b> n√≥ tr·∫£ v·ªÅ.
                </p>
                <a href="https://gemini.google.com/gem/1UHLDMzZ-9GDY1dRo24ZAahyPCPiwzo9W?usp=sharing" 
                   target="_blank" 
                   class="btn-gemini-link">
                    <svg class="inline-svg-icon" style="margin-right: 6px; color:#4f46e5;" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
    </svg>

    M·ªü Gemini Gem c·ªßa t√¥i

    <svg class="inline-svg-icon icon-right" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25" />
    </svg>
                </a>
            </div>

            <div class="step-box-2">
                <div class="step-label-dark">B∆Ø·ªöC 2: D√°n k·∫øt qu·∫£ JSON v√†o ƒë√¢y</div>
                
                <div class="textarea-wrapper">
                    <textarea id="json-paste-area" 
                        class="modern-textarea" 
                        placeholder='V√≠ d·ª•: [{"word":"hello", "meaning":"xin ch√†o"...}]'
                        spellcheck="false"
                        oninput="autoCheckJson()"></textarea>
                    <div id="json-status" class="validation-status"></div>
                </div>
                <div class="form-field" style="margin-top: 15px; margin-bottom: 15px;">
                        <label for="bulk-folder" class="step-label-dark">B∆Ø·ªöC 3: L∆∞u t·∫•t c·∫£ v√†o Folder (nh√≥m / ch·ªß ƒë·ªÅ)</label>
                        
                        <input type="text" 
                            id="bulk-folder" 
                            placeholder="Ch·ªçn ho·∫∑c nh·∫≠p t√™n Folder m·ªõi..." 
                            list="folder-list" 
                            class="input-field" 
                            style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px;">
                            
                        <datalist id="folder-list">
                            </datalist>
                        
                </div>
                
                <div id="bulk-preview-area" style="display:none; margin-top: 20px; border-top: 1px solid #e5e7eb; padding-top: 20px;">
                    
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                        <div style="font-weight:700; color:#374151;">Danh s√°ch t·ª´ (<span id="preview-count">0</span>)</div>
                        
                        <div style="position:relative;">
                            <input type="text" id="bulk-search-input" 
                                placeholder="L·ªçc t·ª´..." 
                                oninput="filterBulkPreview()"
                                style="padding: 6px 12px; border:1px solid #d1d5db; border-radius: 6px; font-size:13px; width: 180px;">
                        </div>
                    </div>

                    <div id="bulk-list-container" class="bulk-list-scroll">
                        </div>

                </div>
            </div>

        </div>

        <div class="modal-footer-modern">
            <button class="btn-ghost-gray" onclick="closeBulkModal()">ƒê√≥ng</button>
            <button class="btn-primary-save" id="btn-process-json" onclick="processAndSaveBulk()" disabled>
                L∆∞u danh s√°ch
            </button>
        </div>
    </div>
</div>

<script src="main.js?v=1.2.3"></script>
</body>
</html>
