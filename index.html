<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <title>TNC English - H·ªçc t·ª´ v·ª±ng ti·∫øng Anh qua Flashcard & AI</title>
    
    <meta name="description" content="·ª®ng d·ª•ng h·ªçc t·ª´ v·ª±ng ti·∫øng Anh mi·ªÖn ph√≠ v·ªõi ph∆∞∆°ng ph√°p L·∫∑p l·∫°i ng·∫Øt qu√£ng (Spaced Repetition). H·ªó tr·ª£ tra t·ª´ ƒëi·ªÉn, Flashcard, AI g·ª£i √Ω v√† √¥n t·∫≠p hi·ªáu qu·∫£." />
    <meta name="keywords" content="h·ªçc ti·∫øng anh,tncenglish, t·ª´ v·ª±ng ti·∫øng anh, flashcard, spaced repetition, √¥n thi toeic, ielts, tnc english, vocab master" />
    <meta name="author" content="TNC English" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta property="og:title" content="TNC English - S·ªï tay t·ª´ v·ª±ng th√¥ng minh" />
    <meta property="og:description" content="H·ªçc t·ª´ v·ª±ng si√™u t·ªëc v·ªõi AI v√† ph∆∞∆°ng ph√°p l·∫∑p l·∫°i ng·∫Øt qu√£ng. ƒêƒÉng k√Ω ngay!" />
    <meta property="og:image" content="https://tncenglish.io.vn/thumbnail.png" /> <meta property="og:url" content="https://tncenglish.io.vn" />
    <meta property="og:type" content="website" />

    <link rel="icon" href="https://tncenglish.io.vn/logo.png" /> 

    <link rel="stylesheet" href="style.css?v=1.2.1" />
</head>
<body>
<div id="trial-timer-badge" class="floating-timer-badge" style="display:none;">
        <div class="timer-label">‚ö° D√ôNG TH·ª¨ MI·ªÑN PH√ç</div>
        <div class="timer-value" id="trial-countdown">--:--:--</div>
        <div class="timer-sub">Gia h·∫°n ƒë·ªÉ d√πng vƒ©nh vi·ªÖn</div>
</div>
<div class="app-shell">
    <div class="app">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-box">
                    <img src="assets/logo.png" alt="Logo" class="logo-img">
                        
                    <div class="logo-info">
                        <span class="logo-title">TNC English</span>
                        <span class="logo-tag">Vocab Master</span>
                    </div>
                </div>
            </div>

            <nav class="nav">
                <button class="nav-item active" onclick="showSection('vocab')" >
                    <span class="nav-icon">üìö</span>
                    <span class="nav-text">T·ª´ v·ª±ng</span>
                </button>
                <button class="nav-item" onclick="showSection('review')">
                    <span class="nav-icon">üß†</span>
                    <span class="nav-text">√în t·∫≠p</span>
                </button>
                <button class="nav-item" onclick="showSection('irregular')">
                    <span class="nav-icon">üî•</span>
                    <span class="nav-text">ƒê·ªông t·ª´ BQT</span>
                </button>
                <button class="nav-item" onclick="showSection('lessons')">
                    <span class="nav-icon">üìñ</span>
                    <span class="nav-text">B√†i h·ªçc</span>
                </button>
                <button class="nav-item" onclick="showSection('profile')">
                    <span class="nav-icon">üë§</span>
                    <span class="nav-text">H·ªì s∆°</span>
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="streak-card">
                    <div class="streak-icon-box">üî•</div>
                    <div class="streak-info">
                        <div class="streak-label">Chu·ªói ng√†y h·ªçc</div>
                        <div class="streak-number" id="sidebar-streak-val">0 ng√†y</div>
                    </div>
                </div>
                
                <div class="app-version">v1.2.1 ‚Ä¢ Made with ‚ù§Ô∏è</div>
            </div>
        </aside>

        <!-- MAIN -->
        <main class="main">
            <!-- Th√™m t·ª´ m·ªõi -->
            <section class="card">

                <div class="card-header-row">
                    <div>
                        <div class="card-title">Th√™m t·ª´ m·ªõi</div>
                        <button class="btn-bulk-ai" onclick="openBulkModal()">
                                <span class="sparkle-icon">‚ú®</span> Th√™m h√†ng lo·∫°t (AI)
                        </button>
                        <p class="card-description">
                            ƒêi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin ho·∫∑c d√πng ü§ñ AI ƒë·ªÉ g·ª£i √Ω
                        </p>
                    </div>
                    <span class="badge">Ngu·ªìn d·ªØ li·ªáu ch√≠nh: Gemini</span>
                </div>

                <form id="word-form">
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="word">Word *</label>
                            <input id="word" type="text" placeholder="vd: apple" required />
                            <button id="ai-suggest-button" type="button" class="btn-ghost ai-btn">
                                ü§ñ AI g·ª£i √Ω n·ªôi dung
                            </button>
                        </div>

                        <div class="form-field">
                            <label for="meaning">Meaning *</label>
                            <input id="meaning" type="text" placeholder="vd: qu·∫£ t√°o" required />
                        </div>

                        <div class="form-field">
                            <label for="folder">Folder (nh√≥m / ch·ªß ƒë·ªÅ)</label>
                            <input type="text" id="folder" placeholder="Folder..." list="folder-list" />
                            <datalist id="folder-list"></datalist>
                        </div>

                        <div class="form-field">
                            <label for="ipa">Pronunciation (IPA)</label>
                            <input id="ipa" type="text" placeholder="vd: /Àà√¶p.…ôl/" />
                        </div>

                        <div class="form-field">
                            <label for="type">Type</label>
                            <input id="type" type="text" placeholder="vd: noun, verb..." />
                        </div>

                        <div class="form-field">
                            <label for="status">Status</label>
                            <select id="status">
                                <option value="new">new</option>
                                <option value="learning">learning</option>
                                <option value="review">review</option>
                                <option value="mastered">mastered</option>
                            </select>
                        </div>

                        <div class="form-field" style="grid-column: 1 / -1;">
                            <label for="sentence">Sentence</label>
                            <textarea id="sentence" placeholder="vd: I eat an apple every morning."></textarea>
                        </div>
                    </div>

                    <button class="btn-primary" type="submit" id="word-submit-button">
                        + Th√™m v√†o Danh s√°ch
                    </button>
                    <button class="btn-ghost" type="button" id="cancel-edit-button" style="display:none;">
                        H·ªßy s·ª≠a
                    </button>
                    <span id="edit-hint" class="edit-hint" style="display:none; margin-left:6px;">
                        ƒêang s·ª≠a m·ªôt t·ª´ ƒë√£ l∆∞u...
                    </span>
                </form>
            </section>

            <!-- Danh s√°ch t·ª´ -->
            <section class="card" id="list-card-section">
                
                <div class="card-header-row">
                    <div>
                        <div class="card-title">Danh s√°ch t·ª´ v·ª±ng</div>
                    </div>
                </div>

                <div class="filter-toolbar">
                    
                    <div class="tools-left">
                        <div class="search-wrapper compact">
                            <span class="search-icon">üîç</span>
                            <input type="text" id="search-input" placeholder="T√¨m ki·∫øm..." autocomplete="off">
                            <button id="clear-search" class="clear-icon" style="display:none;">&times;</button>
                        </div>
                        <div style="width:1px; height:24px; background:#e5e7eb; margin:0 4px;"></div>
                    </div>

                    <div id="folder-filter-row" class="folder-scroll-row">
                        </div>

                </div>
                
                <div class="word-list" id="word-list">
                    <div class="word-row word-header">
                        <div style="flex:1.5;">Word</div>
                        <div style="flex:1;">IPA</div>
                        <div style="flex:2;">Meaning</div>
                        <div style="flex:2;">Sentence</div>
                        <div style="flex:0.8;">Type</div>
                        <div style="flex:1;">Folder</div>
                        <div style="width:90px;">Actions</div>
                    </div>
                    
                    <div class="word-empty" id="word-empty">
                        Ch∆∞a c√≥ t·ª´ n√†o. H√£y b·∫•m "T·∫£i l·∫°i" ho·∫∑c th√™m t·ª´ m·ªõi.
                    </div>
                </div>

                <div class="pagination" id="pagination"></div>

            </section>
        <section id="review-section" class="card" style="display:none;">
            
            <div id="review-menu">
                <div class="card-header-row">
                    <div class="card-title">Trung t√¢m √¥n t·∫≠p</div>
                    <p class="card-description">Ch·ªçn ph∆∞∆°ng ph√°p b·∫°n mu·ªën h·ªçc h√¥m nay</p>
                </div>
                
                <div class="review-grid">
                    <div class="review-option-card" onclick="startReviewSetup('flashcard')">
                        <div class="review-icon">üé¥</div>
                        <div class="review-info">
                            <h3>Flashcards</h3>
                            <p>L·∫≠t th·∫ª ki·ªÉm tra tr√≠ nh·ªõ.</p>
                        </div>
                    </div>

                    <div class="review-option-card" onclick="startReviewSetup('fill')">
                        <div class="review-icon">‚úçÔ∏è</div>
                        <div class="review-info">
                            <h3>ƒêi·ªÅn t·ª´</h3>
                            <p>Nh√¨n nghƒ©a, g√µ t·ª´ ti·∫øng Anh.</p>
                        </div>
                    </div>
                    <div class="review-option-card" onclick="startReviewSetup('scramble')">
                        <div class="review-icon">üß©</div>
                        <div class="review-info">
                            <h3>S·∫Øp x·∫øp ch·ªØ</h3>
                            <p>Gh√©p c√°c k√Ω t·ª± l·ªôn x·ªôn.</p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="mode-scramble" style="display:none;padding-top: 20px;">
                <button class="btn-ghost" onclick="backToReviewFolder()">‚Üê Ch·ªçn l·∫°i ch·ªß ƒë·ªÅ</button>
                <div class="scramble-game-container">
                        
                        <div style="margin-bottom: 20px;">
                            <div style="font-size:11px; font-weight:700; color:#94a3b8; text-transform:uppercase;">G·ª£i √Ω nghƒ©a</div>
                            <div id="scramble-mean" style="font-size:20px; font-weight:600; color:#1e293b; margin-top:4px;">...</div>
                        </div>

                        <div id="scramble-slots-area" class="scramble-slots">
                            </div>

                        <div style="height: 20px; margin-bottom: 10px;">
                            <span id="scramble-feedback" style="font-size:13px; font-weight:500;"></span>
                        </div>

                        <div id="scramble-pool-area" class="scramble-pool">
                            </div>

                        <button onclick="nextScrambleWord()" class="btn-ghost" style="margin-top:30px; font-size:13px; color:#64748b;">
                            B·ªè qua t·ª´ n√†y
                        </button>

                </div>
            </div>

            <div id="review-folder-selection" style="display:none; text-align:center; padding: 20px 0;">
                <div class="card-title" style="margin-bottom:12px;">B·∫°n mu·ªën √¥n ch·ªß ƒë·ªÅ n√†o?</div>
                
                <div style="max-width: 300px; margin: 0 auto 20px;">
                    <label style="display:block; text-align:left; font-size:12px; margin-bottom:4px; color:#6b7280;">Ch·ªçn Folder:</label>
                    <select id="review-folder-select" style="width:100%; padding:10px; border-radius:12px; border:1px solid #d1d5db; outline:none;">
                        </select>
                </div>

                <div class="review-actions" style="justify-content:center; gap:10px; display:flex;">
                    <button class="btn-ghost" onclick="backToReviewMenu()">Quay l·∫°i</button>
                    <button class="btn-primary" onclick="confirmStartGame()">üöÄ B·∫Øt ƒë·∫ßu ngay</button>
                </div>
            </div>

            <div id="mode-flashcard" style="display:none;">
                <button class="btn-ghost" onclick="backToReviewFolder()">‚Üê Ch·ªçn l·∫°i ch·ªß ƒë·ªÅ</button>
                <div class="flashcard-container">
                    <div class="flashcard-scene">
                        <div class="flashcard" id="flashcard-el" onclick="flipCard()">
                            <div class="flashcard-face flashcard-front">
                                <h2 id="fc-word">Word</h2>
                                <p id="fc-ipa" style="color:#6b7280;">/ipa/</p>
                                <div class="tap-hint">Ch·∫°m ƒë·ªÉ l·∫≠t</div>
                            </div>
                            <div class="flashcard-face flashcard-back">
                                <div id="fc-meaning" style="font-weight:600; font-size:18px;">Nghƒ©a</div>
                                <p id="fc-sentence" style="margin-top:8px; font-style:italic; color:#4b5563;">Sentence</p>
                            </div>
                        </div>
                    </div>
                    <div class="review-controls">
                        <button id="btn-review-jumping" class="btn-ghost" onclick="toggleReviewJumpingMode()" style="border: 1px solid #d946ef; color: #a21caf; background: #fdf4ff; font-weight: 600;">
                            ‚ö° Hack n√£o t·ª´ n√†y
                         </button>
                        <button class="btn-ghost" onclick="prevFlashcard()">Tr∆∞·ªõc</button>
                        <span id="fc-progress">0/0</span>
                        <button class="btn-primary" onclick="nextFlashcard()">Ti·∫øp theo ‚Üí</button>
                    </div>
                </div>
            </div>

            <div id="mode-fill" style="display:none;">
                <button class="btn-ghost" onclick="backToReviewFolder()">‚Üê Ch·ªçn l·∫°i ch·ªß ƒë·ªÅ</button>
                <div class="fill-game-container">
                        
                        <div class="fill-hint-box">
                            <div style="font-size:11px; font-weight:700; letter-spacing:1px; text-transform:uppercase; color:#94a3b8; margin-bottom:8px;">G·ª£i √Ω nghƒ©a</div>
                            <div id="fill-mean" class="fill-hint-text" style="font-size:20px; color:#1e293b; font-weight:600; line-height:1.4;">ƒêang t·∫£i...</div>
                            <div id="fill-ipa" class="fill-ipa" style="margin-top:5px; font-family:monospace; color:#64748b;">/ipa/</div>
                        </div>

                        <div class="fill-input-wrapper">
                            <input type="text" id="fill-input" class="fill-input" placeholder="G√µ t·ª´ ti·∫øng Anh..." autocomplete="off">
                            <span id="fill-status-icon" style="position:absolute; right:15px; top:50%; transform:translateY(-50%); font-size:20px; display:none;"></span>
                        </div>

                        <button onclick="checkFillAnswer()" class="btn-check-fill">Ki·ªÉm tra ‚Üµ</button>
                        
                        <button onclick="nextFillWord()" class="btn-ghost" style="margin-top:15px; font-size:13px; color:#64748b;">B·ªè qua t·ª´ n√†y</button>

                </div>
            </div>

        </section>

        <section id="irregular-section" class="card" style="display:none; min-height: 400px;">
            
            <div class="irregular-search-box">
                <div class="search-title">Tra c·ª©u ƒê·ªông t·ª´ BQT</div>
                <div class="search-sub">Nh·∫≠p ƒë·ªông t·ª´ (V1, V2, V3) ho·∫∑c nghƒ©a ti·∫øng Vi·ªát</div>
                
                <div class="search-input-wrapper">
                    <input id="irregular-search-input" type="text" placeholder="G√µ t·ª´ c·∫ßn tra (vd: go, went, ƒÉn...)" autocomplete="off" />
                    <button class="btn-primary search-btn" onclick="triggerSearchIrregular()">üîç</button>
                </div>
                
            </div>

            <div id="irregular-result-container" class="irregular-result-area" style="display:none;">
                </div>

            <div id="irregular-placeholder" style="text-align:center; margin-top:40px; color:#9ca3af;">
                <div style="font-size:40px; margin-bottom:10px;">üìñ</div>
                <div>K·∫øt qu·∫£ tra c·ª©u s·∫Ω hi·ªán t·∫°i ƒë√¢y</div>
            </div>
        </section>

        <section id="profile-section" class="card" style="display:none; border:none; background:transparent; padding:0; box-shadow:none;">
            
            <div class="profile-header-card">
                <div class="profile-avatar">üë§</div>
                <div class="profile-info">
                    <div class="profile-name" id="user-display">ƒêang t·∫£i...</div>
                    <div class="profile-email" id="user-email-sub">...</div>
                    <div id="account-status-badge" style="margin-top:6px;">
                        </div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-val" id="streak-count-val">0</div>
                    <div class="stat-label">Chu·ªói ng√†y (Streak)</div>
                </div>
                <div class="stat-box">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-val" id="total-words-val">0</div>
                    <div class="stat-label">T·ªïng t·ª´ v·ª±ng</div>
                </div>
            </div>

            
                <h3 style="font-size:16px; font-weight:700; color:#1e293b; display:flex; align-items:center; gap:8px;">
                    ‚öôÔ∏è C·∫•u h√¨nh gi·ªçng ƒë·ªçc
                </h3>

                <div class="voice-config-card">
                    <div class="voice-row">
                        <label class="voice-label">Gi·ªçng ƒë·ªçc h·ªá th·ªëng:</label>
                        <div style="display: flex; gap: 10px;">
                            <div class="custom-select-wrapper" style="flex:1;">
                                <select id="voice-select" class="modern-select">
                                    <option>ƒêang t·∫£i danh s√°ch...</option>
                                </select>
                                <span class="select-arrow">‚ñº</span>
                            </div>
                            <button class="btn-test-voice" onclick="testCurrentVoice()">
                                <span>üîä</span> Th·ª≠
                            </button>
                        </div>
                    </div>

                    <div class="voice-row">
                        <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                            <label class="voice-label" style="margin:0;">T·ªëc ƒë·ªô ƒë·ªçc</label>
                            <span id="speed-val" style="font-size:13px; font-weight:700; color:#6366f1;">0.95x</span>
                        </div>
                        
                        <input type="range" id="voice-speed" class="modern-range" 
                            min="0.5" max="1.5" step="0.05" value="0.95"
                            oninput="document.getElementById('speed-val').innerText = this.value + 'x'">
                            
                        <div style="display:flex; justify-content:space-between; font-size:10px; color:#94a3b8; margin-top:6px;">
                            <span>Ch·∫≠m</span>
                            <span>B√¨nh th∆∞·ªùng</span>
                            <span>Nhanh</span>
                        </div>
                    </div>
                </div>
           

            <div class="settings-list">
                <div class="setting-item" onclick="showApiKeyModal()">
                    <div class="setting-left">
                        <span class="setting-icon" style="background:#eef2ff; color:#4f46e5;">ü§ñ</span>
                        <div>
                            <div class="setting-title">C·∫•u h√¨nh Gemini AI</div>
                            <div class="setting-sub">Nh·∫≠p API Key ƒë·ªÉ d√πng t√≠nh nƒÉng g·ª£i √Ω</div>
                        </div>
                    </div>
                    <div style="font-size:12px; color:#6b7280;">·ê≥</div>
                </div>

                <div class="setting-item" onclick="openChangePwModal()">
                    <div class="setting-left">
                        <span class="setting-icon" style="background:#fff7ed; color:#ea580c;">üîë</span>
                        <div>
                            <div class="setting-title">ƒê·ªïi m·∫≠t kh·∫©u</div>
                            <div class="setting-sub">C·∫≠p nh·∫≠t m·∫≠t kh·∫©u b·∫£o v·ªá t√†i kho·∫£n</div>
                        </div>
                    </div>
                    <div style="font-size:12px; color:#6b7280;">·ê≥</div>
                </div>
                
                <div class="setting-item" onclick="window.location.href='https://zalo.me/g/vggdoi022'">
                    <div class="setting-left">
                        <span class="setting-icon" style="background:#f0fdf4; color:#16a34a;">üí¨</span>
                        <div>
                            <div class="setting-title">H·ªó tr·ª£ / Li√™n h·ªá Admin</div>
                            <div class="setting-sub">Gia h·∫°n, b√°o l·ªói, g√≥p √Ω t√≠nh nƒÉng</div>
                        </div>
                    </div>
                    <div style="font-size:12px; color:#6b7280;">‚Üó</div>
                </div>
            </div>

            <button id="logout-button" class="btn-logout-big">
                üö™ ƒêƒÉng xu·∫•t t√†i kho·∫£n
            </button>
            
            <div style="text-align:center; margin-top:20px; font-size:11px; color:#9ca3af;">
                Phi√™n b·∫£n 1.2.1 ‚Ä¢ TNC English
            </div>
        </section>

        <section id="lessons-section" class="card" style="display:none; background: transparent; border: none; box-shadow: none; padding: 0;">
            
            <div id="course-list-view">
                <div style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 24px; color: #4f46e5;">üìö</span>
                    <h2 class="card-title" style="margin:0; font-size: 22px;">T·∫•t c·∫£ kh√≥a h·ªçc</h2>
                </div>
                <div id="course-list-container" class="lesson-grid">
                    </div>
            </div>

            <div id="topic-list-view" style="display: none;">
                <div class="topic-view-header">
                    <div class="header-top-row" onclick="backToCourses()">
                        <span style="font-size: 18px; color: #3b82f6;">‚ùÆ</span> 
                        <h3 id="current-course-title" style="margin:0; font-size: 16px; color: #1f2937;">T√™n kh√≥a h·ªçc</h3>
                    </div>
                    
                    <div class="header-progress-row">
                        <div class="progress-track" style="height: 6px;">
                            <div id="course-total-progress" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <span id="course-progress-text" style="font-size: 11px; color: #6b7280; min-width: 40px; text-align: right;">0 / 0</span>
                        <span style="font-size: 16px; color: #3b82f6; margin-left: 8px;">üìñ</span>
                    </div>
                </div>

                <div id="topic-list-container" class="topic-grid">
                    </div>
            </div>

        </section>
        <section id="learning-section" class="card" style="display:none; border:none; background:transparent; padding:0; box-shadow:none; height: 100%;">
            
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding: 0 10px;">
                <div style="display:flex; align-items:center; gap:10px;">
                    <button onclick="closeLearningMode()" class="btn-ghost" style="font-size:18px; padding:4px 8px;">‚úï</button>
                    <div>
                        <div style="font-size:12px; color:#6b7280; text-transform:uppercase;">ƒêang h·ªçc</div>
                        <div id="learning-topic-title" style="font-size:16px; font-weight:700; color:#1f2937;">Topic Name</div>
                    </div>
                </div>
                <div id="learning-progress-text" style="font-size:14px; font-weight:600; color:#4f46e5;">1/10</div>
            </div>

            <div id="learning-card-container" class="flashcard-container" style="margin-top:10px; height: calc(100vh - 150px); justify-content: flex-start;">
                <div class="flashcard-scene" style="width: 100%; max-width: 340px; height: 420px;">
                    <div class="flashcard" id="topic-flashcard-el" onclick="flipTopicCard()">
                        <div class="flashcard-face flashcard-front">
                            <span class="badge-new" style="position:absolute; top:20px; right:20px;">Learning</span>
                            <h2 id="learn-word" style="font-size:32px; margin-bottom:8px;">Word</h2>
                            <p id="learn-ipa" style="color:#6b7280; font-family:monospace; font-size:16px;">/ipa/</p>
                            <div class="tap-hint">Ch·∫°m ƒë·ªÉ l·∫≠t & xem nghƒ©a</div>
                        </div>
                        <div class="flashcard-face flashcard-back">
                            <div id="learn-meaning" style="font-weight:700; font-size:22px; color:#166534; margin-bottom:12px;">Nghƒ©a</div>
                            <div style="width:40px; height:2px; background:#e5e7eb; margin:0 auto 12px;"></div>
                            <p id="learn-sentence" style="font-style:italic; color:#4b5563; font-size:15px; padding:0 20px;">Sentence</p>
                            <div style="margin-top:20px;">
                                <span class="tag-level" id="learn-type">noun</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="review-controls" style="margin-top:30px; width: 100%; max-width: 340px;">
                    <button id="btn-jumping-mode" class="btn-ghost" onclick="toggleJumpingMode()" style="border: 1px solid #d946ef; color: #a21caf; background: #fdf4ff; font-weight: 600;">
                                ‚ö° Hack n√£o t·ª´ n√†y
                    </button>
                    <button class="btn-primary" onclick="nextTopicCard()" style="width:100%; padding:14px; font-size:16px; box-shadow: 0 4px 15px rgba(79, 70, 229, 0.3);">
                        ƒê√£ hi·ªÉu, ti·∫øp theo ‚ûú
                    </button>
                </div>
            </div>

            <div id="topic-summary-view" style="display: none; background: white; border-radius: 20px; padding: 20px; margin-top: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);">
                <div style="text-align:center; margin-bottom:20px;">
                    <div style="font-size:40px; margin-bottom:10px;">üéâ</div>
                    <div class="card-title" style="font-size:20px;">Ho√†n th√†nh b√†i h·ªçc!</div>
                    <p class="card-description">Ch·ªçn t·ª´ b·∫°n mu·ªën l∆∞u v√†o s·ªï tay c√° nh√¢n.</p>
                </div>

                <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; background:#f9fafb; padding:8px 12px; border-radius:8px;">
                    <label style="font-size:13px; font-weight:600; cursor:pointer; display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="check-all-summary" onchange="toggleCheckAllSummary()"> Ch·ªçn t·∫•t c·∫£
                    </label>
                    <span id="selected-count" style="font-size:12px; color:#6b7280;">0 ƒë√£ ch·ªçn</span>
                </div>

                <div id="summary-list-container" class="summary-list-scroll" style="max-height: 50vh;"></div>

                <div class="modal-actions" style="margin-top: 20px; justify-content: center; gap: 12px;">
                    <button class="btn-ghost" onclick="closeLearningMode()">V·ªÅ danh s√°ch</button>
                    <button class="btn-primary" onclick="saveSelectedSummaryWords()" id="btn-save-summary">üíæ L∆∞u v√†o S·ªï tay</button>
                </div>
            </div>

        </section>
        </main>
    </div>
</div>

<div id="auto-play-modal" class="modal-backdrop" style="display:none; z-index: 99999;">
    <div class="modal-card" style="width: 90%; height: 80%; max-width: 600px; padding: 0; display: flex; flex-direction: column; overflow: hidden; background: #fdf4ff;">
        
        <div style="padding: 15px 20px; background: white; border-bottom: 1px solid #f0abfc; display: flex; justify-content: space-between; align-items: center;">
            <div style="display:flex; align-items:center; gap:8px;">
                <span style="font-size:20px;">‚ö°</span>
                <span style="font-weight:800; color:#a21caf; font-size:16px;">Luy·ªán ph·∫£n x·∫°</span>
            </div>
            <button onclick="stopJumpingMode()" class="btn-ghost" style="color:#d946ef; font-weight:bold;">ƒê√ìNG ‚úï</button>
        </div>

        <div style="width: 100%; height: 6px; background: #fae8ff;">
            <div id="auto-play-progress" style="width: 100%; height: 100%; background: linear-gradient(90deg, #d946ef, #a855f7); transition: width 1s linear;"></div>
        </div>

        <div id="jumping-area" style="flex: 1; position: relative; overflow: hidden; background-image: radial-gradient(#f5d0fe 1px, transparent 1px); background-size: 20px 20px;">
            
            <div id="jumping-word-el" class="jumping-card">
                <div id="jump-word-text" class="jump-text">Ready?</div>
                <div id="jump-word-mean" class="jump-mean">Chu·∫©n b·ªã...</div>
            </div>

        </div>

        <div style="padding: 10px; text-align: center; color: #a21caf; font-size: 12px; background: white; border-top: 1px solid #f0abfc;">
            üîä Nghe v√† nh√¨n theo t·ª´ v·ª±ng ƒëang xu·∫•t hi·ªán
        </div>
    </div>
</div>

<!-- Modal ƒë·ªïi m·∫≠t kh·∫©u -->
<div class="modal-backdrop" id="change-password-modal" style="display:none;">
    <div class="modal-card">
        <div class="modal-title">ƒê·ªïi m·∫≠t kh·∫©u</div>
        <p class="modal-sub">M·∫≠t kh·∫©u s·∫Ω ƒë∆∞·ª£c c·∫≠p nh·∫≠t cho t√†i kho·∫£n ƒëang ƒëƒÉng nh·∫≠p.</p>

        <form id="change-password-form" class="modal-form">
            <div class="form-field">
                <label for="old-password">M·∫≠t kh·∫©u hi·ªán t·∫°i</label>
                <input type="password" id="old-password" autocomplete="current-password" />
            </div>
            <div class="form-field">
                <label for="new-password">M·∫≠t kh·∫©u m·ªõi</label>
                <input type="password" id="new-password" autocomplete="new-password" />
            </div>
            <div class="form-field">
                <label for="confirm-password">Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi</label>
                <input type="password" id="confirm-password" autocomplete="new-password" />
            </div>

            <div class="modal-actions">
                <button type="button" class="btn-ghost" id="cancel-change-password">H·ªßy</button>
                <button type="submit" class="btn-primary">L∆∞u m·∫≠t kh·∫©u</button>
            </div>

            <div id="change-password-message" class="modal-message"></div>
        </form>
    </div>
</div>

<!-- Popup AI spinner -->
<div class="modal-backdrop" id="ai-modal" style="display:none;">
    <div class="ai-card">
        <div class="ai-title">ü§ñ Gemini ƒëang g·ª£i √Ω...</div>
        <div class="ai-body">
            <div class="ai-spinner"></div>
            <div>
                <div id="ai-word-label" class="ai-word-label"></div>
                <div class="ai-text">
                    ƒêang t·∫°o IPA, nghƒ©a ti·∫øng Vi·ªát, c√¢u v√≠ d·ª• v√† lo·∫°i t·ª´. Th∆∞·ªùng ch·ªâ v√†i gi√¢y üí´
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Popup nh·∫≠p Gemini key -->
<div class="modal-backdrop" id="gemini-key-modal" style="display:none;">
    <div class="modal-card">
        <div class="modal-title">Thi·∫øt l·∫≠p Gemini API key</div>
        <p class="modal-sub">
            D√°n Gemini API key ƒë√£ ƒë∆∞·ª£c c·∫•p. H·ªá th·ªëng s·∫Ω ki·ªÉm tra <b>Users</b>.
        </p>

        <form id="gemini-key-form" class="modal-form">
            <div class="form-field">
                <label for="gemini-key-input">Gemini API key</label>
                <input type="text" id="gemini-key-input" autocomplete="off" />
            </div>

            <div class="modal-actions">
                <button type="button" class="btn-ghost" id="cancel-gemini-key">H·ªßy</button>
                <button type="submit" class="btn-primary">L∆∞u key</button>
            </div>

            <div id="gemini-key-message" class="modal-message"></div>
        </form>
    </div>
</div>

<div id="api-key-modal" class="modal-backdrop">
    <div class="modal-card">
        <div class="modal-title">C·∫•u h√¨nh Gemini AI</div>
        <div class="modal-sub">Nh·∫≠p API Key ƒë·ªÉ s·ª≠ d·ª•ng t√≠nh nƒÉng g·ª£i √Ω t·ª´ v·ª±ng, d·ªãch nghƒ©a t·ª± ƒë·ªông.</div>

        <div class="modal-form">
            <div class="form-field">
                <label>Gemini API Key</label>
                <div style="position:relative;">
                    <input type="password" id="input-gemini-key" placeholder="Nh·∫≠p key c·ªßa b·∫°n (b·∫Øt ƒë·∫ßu b·∫±ng AIza...)" style="padding-right: 30px;" />
                    <span onclick="toggleKeyVisibility()" style="position:absolute; right:10px; top:50%; transform:translateY(-50%); cursor:pointer; font-size:14px;">üëÅÔ∏è</span>
                </div>
            </div>
        </div>

        <div style="margin-top:12px;">
            <div onclick="toggleApiGuide()" style="cursor:pointer; color:#4f46e5; font-size:13px; font-weight:600; display:flex; align-items:center; gap:4px;">
                <span id="guide-arrow">‚ñ∂</span> H∆∞·ªõng d·∫´n l·∫•y Key (Mi·ªÖn ph√≠)
            </div>
            
            <div id="api-guide-content" style="display:none; margin-top:8px; background:#f9fafb; padding:12px; border-radius:12px; font-size:12px; border:1px solid #e5e7eb;">
                <ol style="margin:0; padding-left:20px; color:#374151; line-height:1.6;">
                    <li>Truy c·∫≠p <a href="https://aistudio.google.com/app/apikey" target="_blank" style="color:#4f46e5; font-weight:600;">Google AI Studio</a>.</li>
                    <li>ƒêƒÉng nh·∫≠p b·∫±ng t√†i kho·∫£n Google c·ªßa b·∫°n.</li>
                    <li>Nh·∫•n v√†o n√∫t to <b>"Create API key"</b>.</li>
                    <li>Ch·ªçn <b>"Create API key in new project"</b>.</li>
                    <li>Copy ƒëo·∫°n m√£ b·∫Øt ƒë·∫ßu b·∫±ng <code>AIza...</code> v√† d√°n v√†o √¥ b√™n tr√™n.</li>
                </ol>
                <div style="margin-top:6px; color:#059669; font-weight:500;">‚ú® Ho√†n to√†n mi·ªÖn ph√≠ cho c√° nh√¢n.</div>
            </div>
        </div>

        <div id="api-msg" class="modal-message"></div>

        <div class="modal-actions">
            <button class="btn-ghost" onclick="closeApiKeyModal()">ƒê√≥ng</button>
            <button class="btn-primary" onclick="saveApiKey()">L∆∞u c√†i ƒë·∫∑t</button>
        </div>
    </div>
</div>

<!-- Toast -->
<div id="toast"></div>
<div id="toast-loading">
    <div class="mini-spinner"></div>
    <span id="toast-loading-text">ƒêang t·∫£i d·ªØ li·ªáu...</span>
</div>

<div id="premium-modal" class="modal-backdrop" style="display:none;">
    <div class="modal-card-premium">
        <button onclick="closePremiumPopup()" class="close-btn">‚úï</button>

        <div class="premium-header">
            <span class="premium-icon">‚åõ</span>
            <h3 class="premium-title">T√†i kho·∫£n h·∫øt h·∫°n</h3>
            <p class="premium-sub">H·∫°n s·ª≠ d·ª•ng: <span id="session-expired-date">...</span></p>
        </div>

        <div class="pricing-container">
            <div class="plan-box plan-month">
                <div class="plan-name">Theo th√°ng</div>
                <div class="plan-price">35.000ƒë</div>
                <div style="font-size: 11px; color: #94a3b8; margin-top: 4px;">/ 1 th√°ng</div>
            </div>

            <div class="plan-box plan-lifetime">
                <div class="badge-best">TI·∫æT KI·ªÜM NH·∫§T</div>
                <div class="plan-name">Tr·ªçn ƒë·ªùi</div>
                <div class="plan-price">150.000ƒë</div>
                <div class="plan-desc">D√πng vƒ©nh vi·ªÖn</div>
            </div>
        </div>

        <div class="payment-details">
            <div style="text-align:center; font-size:12px; color:#64748b; margin-bottom:8px;">
                Qu√©t m√£ ho·∫∑c chuy·ªÉn kho·∫£n theo th√¥ng tin:
            </div>
            
            <div class="bank-card">
                <div class="bank-row">
                    <span class="bank-label">Ng√¢n h√†ng:</span>
                    <span class="bank-val" style="color:#6366f1;">TPBank</span>
                </div>
                <div class="bank-row">
                    <span class="bank-label">Ch·ªß TK:</span>
                    <span class="bank-val">TRAN NGOC CUONG</span>
                </div>
                <div class="bank-row">
                    <span class="bank-label">S·ªë TK:</span>
                    <span class="bank-val" style="font-size: 15px; letter-spacing: 0.5px;">04312089999</span>
                </div>
                
                <div style="margin-top:12px; font-size:11px; color:#64748b; text-align: center;">N·ªôi dung chuy·ªÉn kho·∫£n (B·∫Øt bu·ªôc):</div>
                <div class="copy-syntax">VOCAB [EMAIL_CUA_BAN]</div>
            </div>
        </div>

        <div class="modal-footer">
            <div class="legal-text">
                ‚ö†Ô∏è <b>L∆∞u √Ω:</b> Kho·∫£n ph√≠ tr√™n d√πng ƒë·ªÉ duy tr√¨ m√°y ch·ªß, API AI v√† b·∫£o d∆∞·ª°ng h·ªá th·ªëng. Ch√∫ng t√¥i kh√¥ng kinh doanh v√¨ l·ª£i nhu·∫≠n v√† tu√¢n th·ªß ph√°p lu·∫≠t. Li√™n h·ªá Zalo: <b>0946415092</b> n·∫øu c·∫ßn h·ªó tr·ª£.
            </div>
            
            <button id="force-logout-btn" class="btn-logout">
                ƒêƒÉng xu·∫•t & K√≠ch ho·∫°t l·∫°i
            </button>
        </div>
    </div>
</div>
<!-- confetti-->
<canvas id="confetti-canvas" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:999999; display:none;"></canvas>

<div id="celebration-modal" class="modal-backdrop" style="display:none; z-index:99999;">
    <div class="modal-card" style="text-align:center; border-top: 5px solid #f59e0b; width: 360px;">
        <div style="font-size: 60px; margin-bottom: 10px; animation: bounce 1s infinite;">üèÜ</div>
        <div class="modal-title" style="color:#d97706; font-size:24px;">Xu·∫•t s·∫Øc!</div>
        
        <p class="modal-sub" style="font-size:15px; margin: 10px 0; color: #4b5563;">
            B·∫°n ƒë√£ √¥n t·∫≠p xong <b id="celebration-count" style="color:#d97706;">0</b> t·ª´ v·ª±ng.
        </p>
        
        <div style="background:#fffbeb; padding:12px; border-radius:12px; font-size:14px; color:#92400e; margin-bottom:20px;">
            "H·ªçc t·∫≠p l√† h·∫°t gi·ªëng c·ªßa ki·∫øn th·ª©c, ki·∫øn th·ª©c l√† h·∫°t gi·ªëng c·ªßa h·∫°nh ph√∫c." üå±
        </div>

        <button class="btn-primary" onclick="closeCelebration()" style="width:100%; background: linear-gradient(to right, #f59e0b, #d97706); border:none;">
            Tuy·ªát v·ªùi, quay l·∫°i!
        </button>
    </div>
</div>
<div id="srs-modal" class="modal-backdrop" style="display:none; z-index:99999;">
    <div class="modal-card" style="width: 400px; border-top: 5px solid #4f46e5;">
        <div style="text-align:center; margin-bottom:12px;">
            <div style="font-size: 40px;">üîî</div>
            <div class="modal-title" style="color:#4f46e5;">Nh·∫Øc nh·ªü √¥n t·∫≠p</div>
            <p class="modal-sub">
                Ph∆∞∆°ng ph√°p <b>L·∫∑p l·∫°i ng·∫Øt qu√£ng</b>: H√£y l∆∞·ªõt nhanh qua c√°c t·ª´ b·∫°n m·ªõi h·ªçc trong 3 ng√†y qua ƒë·ªÉ kh·∫Øc s√¢u tr√≠ nh·ªõ!
            </p>
        </div>

        <div id="srs-list-container" style="max-height: 250px; overflow-y: auto; background: #f9fafb; padding: 10px; border-radius: 12px; border: 1px solid #e5e7eb; margin-bottom: 16px;">
            </div>

        <div class="modal-actions" style="justify-content: center;">
            <button class="btn-primary" onclick="closeSRSModal()" style="width:100%;">ƒê√£ √¥n xong, c·∫£m ∆°n!</button>
        </div>
    </div>
</div>

<div id="global-loader">
    <div class="loader-content">
        <div class="loader-icon"><img src="assets/logo.png" alt="Logo" class="logo-img"></div>
        
        <div class="loader-title">TNC ENGLISH</div>
        
        <div class="tip-container">
            <div class="tip-label">üí° M·∫∏O GHI NH·ªö:</div>
            <div id="loader-tip-text" class="tip-text">ƒêang t·∫£i d·ªØ li·ªáu...</div>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="loader-progress"></div>
        </div>
    </div>
</div>
<div id="bulk-modal" class="modal-backdrop" style="display:none;">
    <div class="modal-card" style="width: 600px; max-width:95%;">
        
        <div class="modal-header-modern">
            <h3 class="modal-title-text">‚ö° Th√™m t·ª´ nhanh (qua Gemini Gem)</h3>
            
        </div>
        
        <div class="modal-body-modern">
            
            <div class="step-box-1">
                <div class="step-label">B∆Ø·ªöC 1: L·∫•y d·ªØ li·ªáu</div>
                <p class="step-desc">
                    Click n√∫t d∆∞·ªõi ƒë·ªÉ m·ªü Gem. Nh·∫≠p danh s√°ch t·ª´ c·∫ßn h·ªçc v√†o ƒë√≥, sau ƒë√≥ <b>Copy ƒëo·∫°n m√£ JSON</b> n√≥ tr·∫£ v·ªÅ.
                </p>
                <a href="https://gemini.google.com/gem/1UHLDMzZ-9GDY1dRo24ZAahyPCPiwzo9W?usp=sharing" 
                   target="_blank" 
                   class="btn-gemini-link">
                    üöÄ M·ªü Gemini Gem c·ªßa t√¥i ‚ÜóÔ∏è
                </a>
            </div>

            <div class="step-box-2">
                <div class="step-label-dark">B∆Ø·ªöC 2: D√°n k·∫øt qu·∫£ JSON v√†o ƒë√¢y</div>
                
                <div class="textarea-wrapper">
                    <textarea id="json-paste-area" 
                        class="modern-textarea" 
                        placeholder='V√≠ d·ª•: [{"word":"hello", "meaning":"xin ch√†o"...}]'
                        spellcheck="false"
                        oninput="autoCheckJson()"></textarea>
                    <div id="json-status" class="validation-status"></div>
                </div>
                <div class="form-field" style="margin-top: 15px; margin-bottom: 15px;">
                        <label for="bulk-folder" style="font-weight:600; color:#374151;">üìÇ L∆∞u t·∫•t c·∫£ v√†o Folder (nh√≥m / ch·ªß ƒë·ªÅ)</label>
                        
                        <input type="text" 
                            id="bulk-folder" 
                            placeholder="Ch·ªçn ho·∫∑c nh·∫≠p t√™n Folder m·ªõi..." 
                            list="folder-list" 
                            class="input-field" 
                            style="width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 5px;">
                            
                        <datalist id="folder-list">
                            </datalist>
                        
                </div>
                
                <div id="bulk-preview-area" style="display:none; margin-top: 20px; border-top: 1px solid #e5e7eb; padding-top: 20px;">
                    
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
                        <div style="font-weight:700; color:#374151;">Danh s√°ch t·ª´ (<span id="preview-count">0</span>)</div>
                        
                        <div style="position:relative;">
                            <input type="text" id="bulk-search-input" 
                                placeholder="üîç L·ªçc t·ª´..." 
                                oninput="filterBulkPreview()"
                                style="padding: 6px 12px; border:1px solid #d1d5db; border-radius: 6px; font-size:13px; width: 180px;">
                        </div>
                    </div>

                    <div id="bulk-list-container" class="bulk-list-scroll">
                        </div>

                </div>
            </div>

        </div>

        <div class="modal-footer-modern">
            <button class="btn-ghost-gray" onclick="closeBulkModal()">ƒê√≥ng</button>
            <button class="btn-primary-save" id="btn-process-json" onclick="processAndSaveBulk()" disabled>
                üíæ L∆∞u danh s√°ch
            </button>
        </div>
    </div>
</div>
<script src="main.js?v=1.2.1"></script>
</body>
</html>
